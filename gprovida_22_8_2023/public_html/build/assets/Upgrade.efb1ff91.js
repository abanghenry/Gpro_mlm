import{D as N}from"./DefaultLayout.5299b97b.js";import{H as k,L as v,r as w,o as t,c as o,a as y,b as e,t as l,d as i,w as P,f as m,g as d,v as C,F as u,e as h,l as _}from"./app.76d76681.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";const x={name:"Upgrade",metaInfo:{title:"Change Password"},components:{Head:k,Link:v},layout:N,props:{auth:Object,errors:Object,flash:Object,user:Object,packages:Object},remember:"form",data(){return{form:this.$inertia.form({username:this.user.username,currentPackageName:this.user.package.name,currentPackageID:this.user.package.id,newPackage:"",upgradeCost:0,wallet:this.user.wallet,newPackageCost:0})}},methods:{update(){if(this.form.upgradeCost>this.form.wallet)return alert("You don't have enough money in your wallet to make this upgrade"),!1;if(this.user.package.price_user[0].price>this.form.newPackageCost)return alert("You can't upgrade to lower plan"),!1;if(this.user.package.price_user[0].price==this.form.newPackageCost)return alert("You can't upgrade to the same plan"),!1;this.form.post("/upgrade"),this.form.currentPackageName=null,this.form.currentPackageID=null,this.form.newPackage=null,this.form.upgradeCost=null,this.form.wallet=null},calculateCost(){let p=this.packages.find(a=>a.id==this.form.newPackage).price_user.find(a=>a.currency_id==this.user.currency_id).price;this.form.newPackageCost=p,this.form.upgradeCost=p-this.user.package.price_user[0].price}}},V={className:"page-wrapper"},O={className:"page-content"},j=e("div",{className:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[e("div",{className:"breadcrumb-title pe-3"},"Profile"),e("div",{className:"ps-3"},[e("nav",{"aria-label":"breadcrumb"},[e("ol",{className:"breadcrumb mb-0 p-0"},[e("li",{className:"breadcrumb-item"},[e("a",{href:"javascript:;"},[e("i",{className:"bx bx-user-circle"})])]),e("li",{className:"breadcrumb-item active","aria-current":"page"},"Upgrade Package")])])])],-1),D={className:"row"},L={className:"col-xl-9"},H={key:0,className:"alert alert-success",role:"alert"},S={key:1,className:"alert alert-danger",role:"alert"},B={className:"card border-top border-0 border-4 border-primary"},M={className:"card-body p-5"},Y=e("div",{className:"card-title d-flex align-items-center"},[e("div",null,[e("i",{className:"bx bx-lock me-1 font-22 text-primary"})]),e("h5",{className:"mb-0 text-primary"},"Upgrade Package")],-1),F=e("hr",null,null,-1),T={className:"row mb-3 mt-4"},q=e("label",{className:"col-sm-3 col-form-label"},"Username",-1),A={className:"col-sm-9"},E={className:"row mb-3 mt-4"},I=e("label",{className:"col-sm-3 col-form-label"},"Current Package",-1),W={className:"col-sm-9"},z={className:"row mb-3"},G=e("label",{className:"col-sm-3 col-form-label"},"New Package",-1),J={className:"col-sm-9"},K=["value"],Q={key:0,className:"form-error"},R={className:"row mb-3"},X=e("label",{className:"col-sm-3 col-form-label"},"Upgrade Cost",-1),Z={className:"col-sm-9"},$={className:"row mb-3"},ee=e("label",{className:"col-sm-3 col-form-label"},"Current Wallet Amount",-1),se={className:"col-sm-9"},ae=e("div",{className:"row"},[e("label",{className:"col-sm-3 col-form-label"}),e("div",{className:"col-sm-9"},[e("button",{type:"submit",className:"btn btn-primary px-5"},"Upgrade")])],-1);function re(c,r,g,p,a,n){const b=w("Head");return t(),o("div",V,[y(b,{title:"Upgrade Package"}),e("div",O,[j,e("div",D,[e("div",L,[c.$page.props.flash.success?(t(),o("div",H,l(c.$page.props.flash.success),1)):i("",!0),c.$page.props.flash.error?(t(),o("div",S,l(c.$page.props.flash.error),1)):i("",!0),e("div",B,[e("div",M,[Y,F,e("form",{className:"row g-3",onSubmit:r[6]||(r[6]=P((...s)=>n.update&&n.update(...s),["prevent"])),autocomplete:"off"},[e("div",T,[q,e("div",A,[m(e("input",{type:"text",className:"form-control","onUpdate:modelValue":r[0]||(r[0]=s=>a.form.username=s),readOnly:"readonly"},null,512),[[d,a.form.username]])])]),e("div",E,[I,e("div",W,[m(e("input",{type:"text",className:"form-control","onUpdate:modelValue":r[1]||(r[1]=s=>a.form.currentPackageName=s),readOnly:"readonly"},null,512),[[d,a.form.currentPackageName]])])]),e("div",z,[G,e("div",J,[m(e("select",{class:"form-select","onUpdate:modelValue":r[2]||(r[2]=s=>a.form.newPackage=s),required:"",onChange:r[3]||(r[3]=(...s)=>n.calculateCost&&n.calculateCost(...s))},[(t(!0),o(u,null,h(g.packages,s=>(t(),o("option",{key:s.id,value:s.id},[_(l(s.name)+" ",1),(t(!0),o(u,null,h(s.price_user,f=>(t(),o(u,null,[f.currency_id==this.user.currency_id?(t(),o(u,{key:0},[_(" ("+l(f.currency_code)+l(f.price.toLocaleString())+") ",1)],64)):i("",!0)],64))),256))],8,K))),128))],544),[[C,a.form.newPackage]]),a.form.errors.newPackage?(t(),o("div",Q,l(a.form.errors.newPackage),1)):i("",!0)])]),e("div",R,[X,e("div",Z,[m(e("input",{type:"number",className:"form-control","onUpdate:modelValue":r[4]||(r[4]=s=>a.form.upgradeCost=s),readonly:""},null,512),[[d,a.form.upgradeCost]])])]),e("div",$,[ee,e("div",se,[m(e("input",{type:"number",className:"form-control","onUpdate:modelValue":r[5]||(r[5]=s=>a.form.wallet=s),readonly:""},null,512),[[d,a.form.wallet]])])]),ae],32)])])])])])])}const ce=U(x,[["render",re]]);export{ce as default};
